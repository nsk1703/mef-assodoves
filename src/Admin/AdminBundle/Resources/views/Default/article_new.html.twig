{% extends "layout/admin.html.twig" %}
{% block stylesheets %}
    <!-- bootstrap select CSS
    ============================================ -->
    <link rel="stylesheet" href="{{ asset('plugins/bootstrap-select/bootstrap-select.css') }}">
    <!-- summernote CSS ============================================ -->
    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.16/dist/summernote-bs4.min.css" rel="stylesheet">

   <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
{% endblock %}
{% block content %}

    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>Articles</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Articles</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </div>

<div class="content" style="padding-bottom: 50px;">
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-12">   
          <form  method="post" id="newArticleEntityForm" enctype="multipart/form-data">      
                <div class="widget-tabs-int" style="background: #fff; border-radius:5px; box-shadow: 0 0 1px rgba(0, 0, 0, 0.17);">
                    <div class="tab-hd" style="border-bottom: 1px solid #dadce0; padding-left:16px; padding-right:16px; padding-top:10px; padding-bottom:10px;">
                      
                        <p style="position:relative; top:10px;">
                          Add quick, dynamic tab functionality to transition through
                           <div class="float-right">
                              <button  onclick="publishArticle();" class="btn" style="border:1px solid #8d8d8d; border-radius:30px; color:#8d8d8d;font-size:13px;padding:5px 15px; margin-right:10px; position:relative; top:-30px;">Publier</button>
                              <button  onclick="addArticleToDraft();" class="btn" style="border:1px solid #8d8d8d; border-radius:30px; color:#8d8d8d;font-size:13px;padding:5px 15px; margin-right:10px; position:relative; top:-30px;">Brouillon</button>
                           </div>
                          
                        </p>
                    </div>
                    <div class="widget-tabs-list" >
                      <ul class="nav nav-tabs" style="margin-top:10px; margin-left:16px; margin-right:16px;">
                        <li class="nav-item">
                            <a class="nav-link active" id="pills-info-tab" data-toggle="pill" href="#pills-shipping" role="tab" aria-controls="pills-shipping" aria-selected="true">
                            Information sur l'article
                            </a>
                        </li>
        
                        <li class="nav-item">
                            <a class="nav-link disabled" aria-disabled="true" id="pills-detail-tab" data-toggle="pill" href="#pills-payement" role="tab" aria-controls="pills-payement" aria-selected="false">
                            Détails
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link disabled" aria-disabled="true"  id="pills-image-tab" data-toggle="pill" href="#pills-summary" role="tab" aria-controls="pills-summary" aria-selected="false">                                   
                            Image
                            </a>
                        </li>
        
                    </ul>                    
                      <div class="tab-content" id="pills-tabContent" style="">

                        <div class="tab-pane fade show active" id="pills-shipping" role="tabpanel" aria-labelledby="pills-info-tab">
                          <div class="tab_title_content" >                           
                            <div class="tab-ctn">
                              <div class="form_body" style="padding-top:16px; padding-bottom:30px; padding-left:16px; padding-right:16px;">
                                  <div class="form-group col-lg-12">
                                      {{ form_label(form.title, "Nom de l'article*", {'label_attr': {'style': 'color: gray; font-size:12px;'}}) }}
                              
                                      <div class="nk-int-st">
                                          {{ form_errors(form.title) }}
                                          {{ form_widget(form.title) }}
                                      
                                      </div>
                                      <small id="" class="form-text text-muted">
                                          Précisez le nom de l'article, la couleur et la garantie (si applicable). Séparez chaque information d'un tiret (-)
                                          
                                      </small>
                                  </div>  


                                  <div class="form-group col-lg-12">
                                      {{ form_label(form.title_en, "Nom de l'article en anglais*", {'label_attr': {'style': 'color: gray; font-size:12px;'}}) }}
                              
                                      <div class="nk-int-st">
                                          {{ form_errors(form.title_en) }}
                                          {{ form_widget(form.title_en) }}
                                      
                                      </div>
                                      <small id="" class="form-text text-muted">
                                          Précisez le nom de l'article, la couleur et la garantie (si applicable). Séparez chaque information d'un tiret (-)
                                          
                                      </small>
                                  </div>   


                                  <div class="form-group col-lg-12">
                                    {{ form_label(form.catalogue, "Nom de catalogue*", {'label_attr': {'style': 'color: gray; font-size:12px;'}}) }}
                            
                                    <div class="bootstrap-select fm-cmp-mg">
                                        {{ form_errors(form.catalogue) }}
                                        {{ form_widget(form.catalogue) }}
                                    
                                    </div>


                                    <small id="" class="form-text text-muted">
                                        Précisez le nom de l'article, la couleur et la garantie (si applicable). Séparez chaque information d'un tiret (-)
                                        Example: Wireless Mouse - Black - 12 Months
                                    </small>
                                  </div>
                              </div>
                              <div class="form-footer" style="border-top: 1px solid #dadce0; padding-top:10px; padding-bottom:10px;">
                                <div class="text-right" style="padding-left:16px; padding-right:16px;">
                                    <a type="button" class="btn go_to_tab_2" style="border:none; color: #1a73e8; font-weight:600; font-size:14px;">Suivant <i class="fa fa-arrow-alt-circle-right"></i></a>
                                </div>
                              </div>





                            </div>
                          </div>
                  
                        </div>
                        <div class="tab-pane fade" id="pills-payement" role="tabpanel" aria-labelledby="pills-detail-tab">
                          <div class="tab_main_content" style="">
                            <div class="tab-ctn tab2">
                              <div class="form_body" style="padding-top:16px; padding-bottom:30px; padding-left:16px; padding-right:16px;">
                                  <div class="form-group col-lg-12">
                                          {{ form_label(form.content, "Description de l'article*", {'label_attr': {'style': 'color: gray; font-size:12px;'}}) }}
                                          {{ form_errors(form.content) }}
                                          {{ form_widget(form.content) }}
                                          
                                  
                                          <small id="" class="form-text text-muted">
                                              Précisez le nom de l'article, la couleur et la garantie (si applicable). Séparez chaque information d'un tiret (-)
                                              
                                          </small>
                                  </div>    


                                  <div class="form-group col-lg-12">
                                      {{ form_label(form.content_en, "Description de l'article en anglais*", {'label_attr': {'style': 'color: gray; font-size:12px;'}}) }}
                                      {{ form_errors(form.content_en) }}
                                      {{ form_widget(form.content_en) }}
                                      
                              
                                      <small id="" class="form-text text-muted">
                                          Précisez le nom de l'article, la couleur et la garantie (si applicable). Séparez chaque information d'un tiret (-)
                                          
                                      </small>
                                  </div>  

                              </div>

                              <div class="form-footer" style="border-top: 1px solid #dadce0; padding-top:10px; padding-bottom:10px; padding-left:16px; padding-right:16px;">
                                  <div class="" style="height: 30px;">
                                    <button type="button" class="btn go_to_tab_1" style="border:none; color: #1a73e8; font-weight:600; font-size:14px; position:absolute; left:16px;"><i class="fa fa-arrow-alt-circle-left"></i> Précedent</button>

                                    <a type="button" class="btn go_to_tab_3" style="border:none; color: #1a73e8; font-weight:600; font-size:14px; position:absolute; right:16px;">Suivant <i class="fa fa-arrow-alt-circle-right"></i></a>
                                </div>

                              </div>


                            </div>
                            
                          </div>
                        </div>
                        <div class="tab-pane fade" id="pills-summary" role="tabpanel" aria-labelledby="pills-image-tab">
                          <div class="tab_main_content" style="">
                            <div class="tab-ctn">
                              <div class="form_body" style="padding-top:16px; padding-bottom:30px; padding-left:16px; padding-right:16px;">
                                  <div class="form-group">
                                      <label class="fileContainer required" for="appbundle_article_image_file" style="
                                      background-repeat: no-repeat;
                                      background-size: cover;
                                      background-position: center center;"> 
                                      
                                      <div class="text-center default_file_input_message" style="position:relative; top:50px;">
                                          <span class="small" style="font-size:14px;">Drop files here to upload</span>                                              
                                      </div>
                  
                                      </label>                          
                              
                                      {{ form_errors(form.image.file) }}
                                      {{ form_widget(form.image.file) }}
          
                                              
                                      
                                  </div>                            
          
                                  <div class="form-group col-12">
                                      
                              
                                      {{ form_errors(form.image.name) }}
                                      {{ form_widget(form.image.name) }}
                                                      
                                  </div>   
                              </div>
                              <div class="form-footer" style="border-top: 1px solid #dadce0; padding-top:10px; padding-bottom:10px; padding-left:16px; padding-right:16px;">
                                <div class="" style="height: 30px;">
                                    <button type="button" class="btn go_to_tab_2" style="border:none; color: #1a73e8; font-weight:600; font-size:14px; position:absolute; left:16px;"><i class="fa fa-arrow-alt-circle-left"></i> Précedent</button>
                                </div>

                              </div>

                            </div>                  
                          </div>
                        </div>
                      </div>                       
                        
                    </div>
                </div>
                {{ form_widget(form) }}
              </form>
        </div>
    </div>

</div>

{% endblock %}
{% block modals %}
<div class="modal fade show" id="checkSubmitModal" tabindex="-1" role="dialog" aria-labelledby="checkSubmitModalLabel" style="display: none;">
  <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="checkSubmitModalLabel"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">×</span>
      </button>
      </div> 		
      <div class="modal-body">       
        <div class="row">
              <div class="col-12 ">
                  <p class="text-justify">
                    L'article à été enregistré avec succès!!!
                  </p>
                  
              </div>

        </div>
      
        
      </div>
  </div>
</div>
</div>
{% endblock %}




{% block javascript %}

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>
    <script src="{{ asset('plugins/bootstrap-select-1.13.9/bootstrap-select.js') }}"></script>

    <!--  summernote JS ============================================ -->

    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.16/dist/summernote-bs4.min.js"></script>
    <script>
   function readURL(input) 
  {
  
    if (input.files && input.files[0]) {
      var reader = new FileReader();
  
      reader.onload = function(e){
        $('.fileContainer').css('background-image', 'url(' + e.target.result+ ')');          
      }
      reader.readAsDataURL(input.files[0]);
    }
  }
  $('#appbundle_article_image_file').change(function(e){
      readURL(this);
      var fileName = e. target. files[0]. name;
      $( "#appbundle_article_image_name" ).val( fileName );
      $('.default_file_input_message').hide();
  }); 



      function intiTabBtnNextClick(){
        $('.go_to_tab_1').on('click', function (e) {
          e.preventDefault();
          $('#pills-info-tab').removeClass('disabled');
          $('#pills-info-tab').tab('show');                   
         
        })
        $('.go_to_tab_2').on('click', function (e) {
            e.preventDefault();
            $('#pills-detail-tab').removeClass('disabled');
            $('#pills-detail-tab').tab('show');                   
            
        })
        $('.go_to_tab_3').on('click', function (e) {
            e.preventDefault();
            $('#pills-image-tab').removeClass('disabled');
            $('#pills-image-tab').tab('show');
           
        })                  
        

      }
      intiTabBtnNextClick();

      function publishArticle(){
            $(this).attr('type', 'submit'); 
            $('#newArticleEntityForm').attr('action', '/admin/article/new'); 
            $("#newArticleEntityForm").submit(function(event){
            event.preventDefault(); //prevent default action 
            var post_url = $(this).attr("action"); //get form action url
            var request_method = $(this).attr("method"); //get form GET/POST method
            var form_data = new FormData(this); //Creates new FormData object
            $.ajax({
                url : post_url,
                type: request_method,
                data : form_data,
            contentType: false,
            cache: false,
                processData:false,
        
                success : function(){
                
                    
                }
            }).done(function(){ //
              $('#checkSubmitModal').modal('show'); 
            });
        
        }); 
      }

      function addArticleToDraft(){
          $(this).attr('type', 'submit'); 
          $('#newArticleEntityForm').attr('action', '/admin/article/new/draft');
          $("#newArticleEntityForm").submit(function(event){
            event.preventDefault(); //prevent default action  
            var post_url = $(this).attr("action"); //get form action url
            var request_method = $(this).attr("method"); //get form GET/POST method
            var form_data = new FormData(this); //Creates new FormData object
            $.ajax({
                url : post_url,
                type: request_method,
                data : form_data,
            contentType: false,
            cache: false,
                processData:false,
        
                success : function(){
                
                    
                }
            }).done(function(){ //
              $('#checkSubmitModal').modal('show'); 
            });
        
        }); 
      }

     




    </script>
{% endblock %}